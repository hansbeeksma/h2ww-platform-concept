(()=>{"use strict";var e={140:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.accessibleColorPairs=n.anxietyAwareColorCombinations=n.generateCSSTokens=n.getTypographyValue=n.getSpacingValue=n.getColorValue=n.calmConfidenceTokens=void 0,n.calmConfidenceTokens={colors:{primary:{blue:"#4A90E2",dark:"#357ABD",light:"#EAF3FB"},semantic:{success:"#7ED321",warning:"#F5A623",error:"#E85D75",info:"#9B51E0"},neutral:{900:"#1A1A1A",700:"#4A4A4A",500:"#9B9B9B",300:"#D8D8D8",100:"#F7F8FA",white:"#FFFFFF"}},typography:{family:{primary:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif",code:"'Fira Code', 'SF Mono', Monaco, Consolas, monospace"},scale:{xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.25rem",xl:"1.563rem","2xl":"1.953rem","3xl":"2.441rem"},weight:{normal:400,medium:500,semibold:600,bold:700}},spacing:{1:"0.5rem",2:"1rem",3:"1.5rem",4:"2rem",5:"2.5rem",6:"3rem",8:"4rem",10:"5rem"},shadows:{sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},animations:{duration:{fast:"150ms",base:"250ms",slow:"500ms"},easing:{ease:"cubic-bezier(0.4, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",easeOut:"cubic-bezier(0, 0, 0.2, 1)",easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)"}}},n.getColorValue=e=>{const o=e.split(".");let t=n.calmConfidenceTokens.colors;for(const e of o)if(t=t[e],!t)return"#000000";return t},n.getSpacingValue=e=>n.calmConfidenceTokens.spacing[e],n.getTypographyValue=(e,o)=>{var t;return(null===(t=n.calmConfidenceTokens.typography[e])||void 0===t?void 0:t[o])||""},n.generateCSSTokens=()=>{const e=n.calmConfidenceTokens;let o=":root {\n";return Object.entries(e.colors).forEach(([e,n])=>{Object.entries(n).forEach(([n,t])=>{o+=`  --color-${e}-${n}: ${t};\n`})}),Object.entries(e.typography.family).forEach(([e,n])=>{o+=`  --font-${e}: ${n};\n`}),Object.entries(e.typography.scale).forEach(([e,n])=>{o+=`  --text-${e}: ${n};\n`}),Object.entries(e.typography.weight).forEach(([e,n])=>{o+=`  --font-${e}: ${n};\n`}),Object.entries(e.spacing).forEach(([e,n])=>{o+=`  --space-${e}: ${n};\n`}),Object.entries(e.shadows).forEach(([e,n])=>{o+=`  --shadow-${e}: ${n};\n`}),Object.entries(e.animations.duration).forEach(([e,n])=>{o+=`  --duration-${e}: ${n};\n`}),Object.entries(e.animations.easing).forEach(([e,n])=>{o+=`  --easing-${e}: ${n};\n`}),o+="}\n",o},n.anxietyAwareColorCombinations={calming:{background:n.calmConfidenceTokens.colors.primary.light,text:n.calmConfidenceTokens.colors.neutral[700],accent:n.calmConfidenceTokens.colors.primary.blue},success:{background:"#F0F9E8",text:n.calmConfidenceTokens.colors.neutral[700],accent:n.calmConfidenceTokens.colors.semantic.success},gentle_warning:{background:"#FEF7E6",text:n.calmConfidenceTokens.colors.neutral[700],accent:n.calmConfidenceTokens.colors.semantic.warning},soft_error:{background:"#FDF2F4",text:n.calmConfidenceTokens.colors.neutral[700],accent:n.calmConfidenceTokens.colors.semantic.error}},n.accessibleColorPairs=[{background:n.calmConfidenceTokens.colors.neutral.white,text:n.calmConfidenceTokens.colors.neutral[900]},{background:n.calmConfidenceTokens.colors.neutral[100],text:n.calmConfidenceTokens.colors.neutral[700]},{background:n.calmConfidenceTokens.colors.primary.blue,text:n.calmConfidenceTokens.colors.neutral.white},{background:n.calmConfidenceTokens.colors.primary.dark,text:n.calmConfidenceTokens.colors.neutral.white},{background:n.calmConfidenceTokens.colors.semantic.success,text:n.calmConfidenceTokens.colors.neutral.white}]}},n={};function o(t){var a=n[t];if(void 0!==a)return a.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,o),i.exports}(()=>{const e=o(140);function n(e){let n=0,o=0;return e.forEach(e=>{if("children"in e){const t=e.children.length;n+=t,o=Math.max(o,t)}else n+=1}),o>9?8:o>7?6:o<3?4:2}function t(e){const n=[];return e.forEach(e=>{"fills"in e&&e.fills&&Array.isArray(e.fills)&&e.fills.forEach(e=>{"SOLID"===e.type&&e.color.r>.8&&e.color.g<.3&&n.push("High-intensity red color detected - may increase anxiety")}),"width"in e&&"height"in e&&(e.width<44||e.height<44)&&n.push("Touch target too small - may cause frustration"),"children"in e&&e.children.length>9&&n.push("Too many elements in container - cognitive overload risk")}),n}function a(e){const n=[];return e.forEach(e=>{if("TEXT"===e.type&&n.push("Text contrast needs verification"),"RECTANGLE"===e.type&&"fills"in e){const o=e.fills;o!==figma.mixed&&Array.isArray(o)&&o.some(e=>"IMAGE"===e.type)&&!e.name.includes("alt:")&&n.push("Image missing alt text description")}}),n}function i(e){const n=[];return n.push({type:"anxiety",severity:"medium",description:"Consider using calmer colors from the H2WW palette",solution:"Apply primary blue (#4A90E2) for trust-building",confidence:.8}),n.push({type:"accessibility",severity:"high",description:"Ensure touch targets meet 44px minimum size",solution:"Resize interactive elements to minimum 44x44px",confidence:.9}),n}function r(e){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16)/255,g:parseInt(n[2],16)/255,b:parseInt(n[3],16)/255}:{r:0,g:0,b:0}}figma.showUI(__html__,{width:400,height:600,themeColors:!0,title:"H2WW Component Library"}),figma.ui.onmessage=async o=>{console.log("Received message:",o);try{switch(o.type){case"create-component":await async function(n){var o;const{name:t,category:a,variants:i}=n;try{const n=figma.createFrame();n.name=`${t} - ${a}`,n.resize(200,100),n.fills=[{type:"SOLID",color:r(e.calmConfidenceTokens.colors.neutral.white)}],n.cornerRadius=8,n.effects=[{type:"DROP_SHADOW",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:2},radius:4,spread:0,visible:!0,blendMode:"NORMAL"}],"atom"===a&&t.toLowerCase().includes("button")&&await async function(n){const o=[{name:"Primary",color:e.calmConfidenceTokens.colors.primary.blue,anxiety:"low"},{name:"Secondary",color:e.calmConfidenceTokens.colors.primary.light,anxiety:"low"},{name:"Anxiety-Safe",color:e.calmConfidenceTokens.colors.semantic.success,anxiety:"very-low"},{name:"Ghost",color:"transparent",anxiety:"minimal"}];let t=20;for(const a of o){const o=figma.createFrame();o.name=`Button - ${a.name}`,o.resize(120,44),o.x=40,o.y=t,"transparent"!==a.color&&(o.fills=[{type:"SOLID",color:r(a.color)}]),o.cornerRadius=6,o.paddingLeft=16,o.paddingRight=16,o.paddingTop=12,o.paddingBottom=12;const i=figma.createText();await figma.loadFontAsync({family:"Inter",style:"Medium"}),i.characters=a.name,i.fontSize=14,i.fills=[{type:"SOLID",color:"Secondary"===a.name?r(e.calmConfidenceTokens.colors.primary.blue):r(e.calmConfidenceTokens.colors.neutral.white)}],i.x=(o.width-i.width)/2,i.y=(o.height-i.height)/2,o.appendChild(i),n.appendChild(o),t+=64}}(n),figma.currentPage.appendChild(n),figma.viewport.scrollAndZoomIntoView([n]),figma.ui.postMessage({type:"component-created",data:{id:n.id,name:n.name,anxietyLevel:(null===(o=i[0])||void 0===o?void 0:o.anxietyLevel)||"low"}})}catch(e){throw new Error(`Failed to create component: ${e}`)}}(o.componentData);break;case"analyze-selection":await async function(){const e=figma.currentPage.selection;if(0===e.length)return void figma.ui.postMessage({type:"analysis-result",data:{message:"Please select elements to analyze",hasSelection:!1}});const o={cognitiveLoad:n(e),anxietyPatterns:t(e),accessibilityIssues:a(e),recommendations:i()};figma.ui.postMessage({type:"analysis-result",data:o})}();break;case"design-tokens":await async function(e){const n=figma.currentPage.selection;0!==n.length?(n.forEach(n=>{"fills"in n&&e.color&&(n.fills=[{type:"SOLID",color:r(e.color)}]),"TEXT"===n.type&&e.fontSize&&(n.fontSize=parseInt(e.fontSize))}),figma.notify("Design tokens applied successfully!")):figma.notify("Please select elements to apply tokens to")}(o.tokens);break;case"accessibility-check":await async function(){const e=figma.currentPage.selection;if(0===e.length)return void figma.notify("Please select elements to check accessibility");const n={colorContrast:!0,touchTargetSize:(o=e,o.every(e=>!("width"in e)||!("height"in e)||e.width>=44&&e.height>=44)),textReadability:!0,keyboardNavigation:!0,screenReaderOptimized:!0,score:85};var o;figma.ui.postMessage({type:"accessibility-report",data:n})}();break;case"get-selection":!function(){const e=figma.currentPage.selection;figma.ui.postMessage({type:"selection-updated",data:{count:e.length,types:e.map(e=>e.type),hasSelection:e.length>0}})}();break;case"close-plugin":figma.closePlugin();break;default:console.log("Unknown command:",o.type)}}catch(e){console.error("Error handling message:",e),figma.ui.postMessage({type:"error",message:e instanceof Error?e.message:"Unknown error occurred"})}},console.log("H2WW Component Library Plugin initialized"),figma.ui.postMessage({type:"plugin-ready"})})()})();